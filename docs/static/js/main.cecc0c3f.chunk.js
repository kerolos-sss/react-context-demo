(this["webpackJsonpcontext-demo"]=this["webpackJsonpcontext-demo"]||[]).push([[0],{39:function(e,t,n){e.exports=n(53)},44:function(e,t,n){},45:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),s=n.n(o),c=(n(44),n(45),n(57)),l=n(18),u=n(9),i=n(8),d=n(20),p=n(19),m=function(e,t,n){var o=Object(a.createContext)(n);return{Context:o,Provider:function(n){var s=n.children,c=Object(a.useReducer)(e),l=Object(d.a)(c,2),u=l[0],p=l[1],m={};for(var f in t)m[f]=t[f](p);return r.a.createElement(o.Provider,{value:Object(i.a)({state:u},m)},s)}}},f=n(6),b=n.n(f),g=n(16),v=n(24),h=n(36),y=function(){var e=Object(g.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){t==n?setTimeout((function(){E("TOKEN"),e({userId:t,userToken:"TOKEN"})}),1e3):setTimeout((function(){a(new Error("Authentication failed"))}),3e3)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){w.token=e},w=function e(){Object(h.a)(this,e)};w.token=null,w.data=[{id:1,title:"First Post",body:"First post body"},{id:2,title:"Second Post",body:"Second post body"},{id:3,title:"Third Post",body:"Third post body"},{id:4,title:"Fourth Post",body:"Fourth post body"},{id:5,title:"Fifth Post",body:"Fifth post body"},{id:6,title:"Sixth Post",body:"Sixth post body"},{id:7,title:"Seventh Post",body:"Seventh post body"}];var O=function(){var e=Math.random();return new Promise((function(t,n){e>=.25?setTimeout((function(){return t(Object(v.a)(w.data))}),1e3):setTimeout((function(){n(new Error("Data error"))}),3e3)}))},j=function(e){var t=Math.random();return new Promise((function(n,a){t>=.25?setTimeout((function(){var t=w.data.map((function(e){return e.id}));console.log("IDS",t);var a=Math.max.apply(Math,[0].concat(Object(v.a)(t)))+1;e.id=a,w.data.push(Object(i.a)({},e)),n(e)}),1e3):setTimeout((function(){a(new Error("Data error"))}),3e3)}))},x=function(e,t){console.log("editPost"),console.log(e,t);var n=Math.random();return new Promise((function(a,r){n>=.25?setTimeout((function(){var n=w.data.find((function(t){return t.id==e}));n?(w.data=w.data.map((function(a){return a==n?Object(i.a)({},t,{id:e}):a})),n=Object(i.a)({},t,{id:e}),a(Object(i.a)({},n))):r(new Error("Resource Not Found"))}),1e3):setTimeout((function(){r(new Error("Data error"))}),3e3)}))},k=function(e){var t=Math.random();return new Promise((function(n,a){t>=.25?setTimeout((function(){-1!=w.data.findIndex((function(t){return t.id==e}))?(w.data=w.data.filter((function(t){return t.id!=e})),n({message:"Deleted"})):a(new Error("Resource Not Found"))}),1e3):setTimeout((function(){a(new Error("Data error"))}),3e3)}))},_=function(e){return Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"SAGA_DEMO_LOGIN",payload:{getLoginErrorAction:S,setUsername:M(e),setPassword:T(e),login:P(e)}});case 1:case"end":return t.stop()}}),t)})))},P=function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n,a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y(n,a);case 3:r=t.sent,e({type:"login_success",payload:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(S(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},M=function(e){return function(t){e({type:"login_set_username",payload:t})}},T=function(e){return function(t){e({type:"login_set_password",payload:t})}},S=function(e){return{type:"login_error",payload:e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login_success":return Object(i.a)({},e,{error:null,creds:t.payload});case"login_error":return Object(i.a)({},e,{error:t.payload,creds:null});case"login_set_username":return Object(i.a)({},e,{error:null,username:t.payload});case"login_set_password":return Object(i.a)({},e,{error:null,password:t.payload});default:return e}},C=m(A,{login:P,setPassword:T,setUsername:M},{}),I=(C.Context,C.Provider,Object(p.b)((function(e){return{authState:e.auth}}),(function(e){var t={login:P,setPassword:T,setUsername:M,sagaTheLogin:_},n={};for(var a in t)n[a]=t[a](e);return n}))),N=n(58),F=n(54),D=I((function(e){var t=e.authState,n=e.login,a=e.setUsername,o=e.setPassword,s=e.sagaTheLogin;return console.log(arguments),console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{value:"SAGA AWAY THE LOGIN",type:"button",onClick:function(){return s()}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,null,"Username"),r.a.createElement("br",null),r.a.createElement(N.a,{value:(null===t||void 0===t?void 0:t.username)||"",type:"text",onChange:function(e){return a(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(F.a,null,"Password"),r.a.createElement("br",null),r.a.createElement(N.a,{value:(null===t||void 0===t?void 0:t.password)||"",type:"password",onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(N.a,{value:"login",type:"button",onClick:function(){return n(t.username,t.password)}}),(null===t||void 0===t?void 0:t.error)&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement("br",null)," ",r.a.createElement(F.a,{style:{color:"red"}},t.error)," "))})),H=n(55),U=n(56),L=function(e){var t=e.posts,n=e.actions;return console.log("PostList"),r.a.createElement("div",null,r.a.createElement(H.a,null,t.map((function(e){return r.a.createElement(U.a,{key:e.key},r.a.createElement("h4",null,e.heading),r.a.createElement("h4",null,e.detail.substring(0,15)+"..."),r.a.createElement(N.a,{type:"button",value:"DELETE",onClick:function(){return n.delete(e.key)}}),r.a.createElement(N.a,{type:"button",value:"Edit",onClick:function(){return n.edit(e.key,e)}}),r.a.createElement(N.a,{type:"button",value:"View",onClick:function(){return n.view(e.key,e)}}))}))))},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("PostsReducer"),console.log(e),console.log(t),t.type){case"fetch_posts_success":return Object(i.a)({},e,{successMessage:t.payload.successMessage,error:null,posts:t.payload.posts});case"fetch_posts_error":return Object(i.a)({},e,{successMessage:null,error:t.payload,posts:null});case"delete_post_success":return e.posts=e.posts.filter((function(e){return e.id!=t.payload.id})),Object(i.a)({},e,{successMessage:t.payload.successMessage,error:null,posts:Object(v.a)(e.posts)});case"delete_post_error":return Object(i.a)({},e,{successMessage:null,error:t.payload});case"edit_post_success":var n=e.posts.findIndex((function(e){return e.id=t.payload.id})),a=e.posts[n],r=Object(i.a)({},a,{},t.payload.data,{id:a.id});return e.posts[n]=r,Object(i.a)({},e,{successMessage:t.payload.successMessage,error:null,posts:e.posts});case"edit_post_error":return Object(i.a)({},e,{successMessage:null,error:t.payload});case"add_post_success":var o=Object(i.a)({},t.payload.data,{id:t.payload.id});return e.posts.push(o),Object(i.a)({},e,{successMessage:t.payload.successMessage,error:null,posts:e.posts});case"add_post_error":return Object(i.a)({},e,{successMessage:null,error:t.payload});default:return e}},B=function(e){return Object(g.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O();case 3:n=t.sent,e({type:"fetch_posts_success",payload:{posts:n,successMessage:"posts loaded"}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e({type:"fetch_posts_error",payload:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},G=function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(n);case 3:e({type:"delete_post_success",payload:{id:n,successMessage:"Deleted successfully"}}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e({type:"delete_post_error",payload:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n,a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x(n,a);case 3:return t.sent,e({type:"edit_post_success",payload:{id:n,data:a,successMessage:"Edited successfully"}}),t.abrupt("return",!0);case 8:throw t.prev=8,t.t0=t.catch(0),e({type:"edit_post_error",payload:t.t0.message}),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(g.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j(n);case 3:return a=t.sent,r=a.id,e({type:"add_post_success",payload:{id:r,data:n,successMessage:"Added successfully"}}),t.abrupt("return",!0);case 9:throw t.prev=9,t.t0=t.catch(0),e({type:"add_post_error",payload:t.t0.message}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},J=m(Y,{fetchAll:B,addPost:W,editPost:R,deletePost:G}),K=(J.Context,J.Provider,Object(p.b)((function(e){return{postsState:e.posts}}),(function(e){var t={fetchAll:B,addPost:W,editPost:R,deletePost:G},n={};for(var a in t)n[a]=t[a](e);return n}))),V=K((function(e){var t=e.postsState,n=e.fetchAll,o=e.deletePost,s=Object(u.f)();return Object(a.useEffect)((function(){return console.log("PostsScreen reloaded"),n(),function(){console.log("Cleanup should be here")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{type:"button",onClick:function(){s.push("/posts/new")},value:"New Post"}),r.a.createElement(N.a,{type:"button",onClick:n,value:"Reload"}),(null===t||void 0===t?void 0:t.error)?r.a.createElement("h4",{style:{color:"red"}}," ",t.error):null,(null===t||void 0===t?void 0:t.successMessage)?r.a.createElement("h4",null," ",t.successMessage):null,(null===t||void 0===t?void 0:t.posts)?r.a.createElement(L,{posts:t.posts.map((function(e){return{key:e.id,heading:e.title,detail:e.body}})),actions:{delete:o,edit:function(e,t){s.push("/posts/edit/".concat(e),{id:e,data:t})},view:function(e,t){s.push("/posts/".concat(e),{id:e,data:t})}}}):r.a.createElement("h3",null,"No Posts yet"))})),$=function(e){var t=e.data,n=e.doneHandler,o=e.success,s=e.error,c=Object(a.useState)(null===t||void 0===t?void 0:t.heading),l=Object(d.a)(c,2),u=l[0],i=l[1],p=Object(a.useState)(null===t||void 0===t?void 0:t.detail),m=Object(d.a)(p,2),f=m[0],b=m[1];return r.a.createElement("div",null,o&&r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement(F.a,{style:{color:"green"}},o)," ",r.a.createElement("br",null)," "),s&&r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement(F.a,{style:{color:"red"}},s)," ",r.a.createElement("br",null)," "),r.a.createElement("br",null),r.a.createElement(F.a,null,"Post Id"),r.a.createElement("br",null),r.a.createElement(F.a,null,(null===t||void 0===t?void 0:t.key)||"New Post"),r.a.createElement("br",null),r.a.createElement(F.a,null,"Heading"),r.a.createElement("br",null),r.a.createElement(N.a,{type:"text",value:u,onChange:function(e){return i(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(F.a,null,"Detail"),r.a.createElement("br",null),r.a.createElement(N.a,{type:"textarea",value:f,onChange:function(e){return b(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(N.a,{type:"button",value:"Save",onClick:function(){n(t.key,{heading:u,detail:f})}}),r.a.createElement("br",null))},q=K(Object(u.g)((function(e){var t=e.history,n=e.location,a=e.postsState,o=e.editPost;return r.a.createElement("div",null,r.a.createElement($,{data:n.state.data,doneHandler:function(e,n){o(e,{title:n.heading,body:n.detail}).then((function(){t.goBack()})).catch((function(e){console.log(e)}))},success:a.success,error:a.error}))}))),z=function(e){var t=e.data,n=e.doneHandler;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(F.a,null,"Post Id"),r.a.createElement("br",null),r.a.createElement(F.a,null,null===t||void 0===t?void 0:t.key),r.a.createElement("br",null),r.a.createElement(F.a,null,"Heading"),r.a.createElement("br",null),r.a.createElement(F.a,null,t.heading),r.a.createElement("br",null),r.a.createElement(F.a,null,"Detail"),r.a.createElement("br",null),r.a.createElement("p",null,t.detail),r.a.createElement("br",null),r.a.createElement(N.a,{type:"button",value:"Back",onClick:n}),r.a.createElement("br",null))},Q=K(Object(u.g)((function(e){var t=e.history,n=e.location;e.postsState,e.editPost;return r.a.createElement("div",null,r.a.createElement(z,{data:n.state.data,doneHandler:function(e,n){t.goBack()}}))}))),X=K(Object(u.g)((function(e){var t=e.history,n=e.postsState,a=e.addPost;return r.a.createElement("div",null,r.a.createElement($,{data:{},doneHandler:function(e,n){a({title:n.heading,body:n.detail}).then((function(){t.goBack()})).catch((function(e){console.log(e)}))},success:n.success,error:n.error}))}))),Z=function(){return r.a.createElement("p",null,"Home")},ee=function(){return r.a.createElement("p",null,"About")},te=(I((function(e){var t=e.authState;return console.log("APP"),console.log(arguments),r.a.createElement("div",{className:"App"},r.a.createElement(c.a,null,"Hello "),(null===t||void 0===t?void 0:t.creds)?r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/",to:"/posts"}),r.a.createElement(u.b,{exact:!0,path:"/posts",component:V}),r.a.createElement(u.b,{path:"/posts/new",component:X}),r.a.createElement(u.b,{path:"/posts/edit/:id",component:q}),r.a.createElement(u.b,{exact:!0,path:"/posts/:id",component:Q}),r.a.createElement(u.b,{path:"/about",component:ee}),r.a.createElement(u.b,{path:"/home",component:Z})):r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/",to:"/login"}),r.a.createElement(u.b,{path:"/login",component:D})))})),function(){});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=n(17),ae=Object(ne.c)({posts:Y,auth:A}),re=(n(52),n(37)),oe=n.n(re),se=n(38),ce=n(13),le=b.a.mark(fe),ue=b.a.mark(be),ie=b.a.mark(ge),de=b.a.mark(ve),pe=function(e){return new Promise((function(t){return setTimeout(t,e)}))},me=function(){return Object(ce.c)((function(e){return e.auth}))};function fe(e){var t,n,a,r,o,s,c,l,u;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(e),t=e.payload,n=t.getLoginErrorAction,a=t.setUsername,r=t.setPassword,o=t.login,i.next=4,Object(ce.b)(n("I will use the error message to display some interesting idea."));case 4:return i.next=6,Object(ce.a)(pe,5e3);case 6:return s=300,"I am Trying to display this message using saga delays. This demo is to show how generator functions are incorporated into saga",i.delegateYield(ge("I am Trying to display this message using saga delays. This demo is to show how generator functions are incorporated into saga",s,n),"t0",9);case 9:return"I will enter my user name first",i.delegateYield(ge("I will enter my user name first",s,n),"t1",11);case 11:return i.next=13,Object(ce.a)(pe,1e4);case 13:return s=500,c="UserName",i.delegateYield(be(c,s,a),"t2",16);case 16:return l="User",i.delegateYield(be(l,s,r),"t3",18);case 18:return s=300,me().password,u="Ops. Wrong password, will try again. ps: his password was :::"+l,i.delegateYield(ge(u,s,n),"t4",22);case 22:return s=500,c="UserName",i.delegateYield(be(c,s,a),"t5",25);case 25:return l="UserName",i.delegateYield(be(l,s,r),"t6",27);case 27:if(me().creds){i.next=34;break}return"I will try to login",i.delegateYield(be("I will try to login",s,n),"t7",30);case 30:return i.next=32,Object(ce.a)(o,c,l);case 32:i.next=27;break;case 34:case"end":return i.stop()}}),le)}function be(e,t,n){var a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=0;case 1:if(!(a<e.length)){r.next=9;break}return r.next=4,Object(ce.a)(pe,t);case 4:return r.next=6,Object(ce.a)(n,e.substr(0,a+1));case 6:a++,r.next=1;break;case 9:case"end":return r.stop()}}),ue)}function ge(e,t,n){var a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=0;case 1:if(!(a<e.length)){r.next=9;break}return r.next=4,Object(ce.a)(pe,t);case 4:return r.next=6,Object(ce.b)(n(e.substr(0,a+1)));case 6:a++,r.next=1;break;case 9:case"end":return r.stop()}}),ie)}function ve(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.d)("SAGA_DEMO_LOGIN",fe);case 2:case"end":return e.stop()}}),de)}var he=ve,ye=Object(se.a)(),Ee=Object(ne.e)(ae,Object(ne.a)(ye,oe.a));s.a.render(r.a.createElement(p.a,{store:Ee},r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null))),document.getElementById("root")),ye.run(he),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.cecc0c3f.chunk.js.map